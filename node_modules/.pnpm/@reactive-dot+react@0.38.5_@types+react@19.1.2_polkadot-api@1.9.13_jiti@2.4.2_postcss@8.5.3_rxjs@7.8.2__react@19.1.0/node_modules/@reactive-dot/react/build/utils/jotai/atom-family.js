import { objectId } from "../object-id.js";
export function atomFamily(initializeAtom, getKey) {
    const empty = Symbol("empty");
    const atoms = new Map();
    const _getKey = getKey ??
        ((...args) => args.length === 0
            ? empty
            : args.length === 1
                ? args[0]
                : args.map(objectId).join());
    return Object.assign((...args) => {
        const key = _getKey(...args);
        return (atoms.get(key) ?? atoms.set(key, initializeAtom(...args)).get(key));
    }, { delete: (...args) => atoms.delete(_getKey(...args)) });
}
//# sourceMappingURL=atom-family.js.map